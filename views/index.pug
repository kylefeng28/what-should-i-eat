doctype html
html.no-js(lang='en-US')
	head
		meta(charset='utf-8')
		title Where Should I Eat Today?

		// jQuery
		script(src="https://code.jquery.com/jquery-3.2.1.min.js",
					integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=",
					crossorigin="anonymous")

		// Bootstrap
		// link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css',
			integrity='sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u', crossorigin='anonymous')
		// script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js',
			integrity='sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa', crossorigin='anonymous')

		// Materialize
		link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css')
		script(src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js')

		// Axios
		script(src='https://unpkg.com/axios/dist/axios.min.js')

		// Vue
		script(src='https://unpkg.com/vue')

		link(rel='stylesheet', href='./main.css')

	body
		header
				h1.center Hello there!
		main#app.container
			// div#intput.col.m4
			div#intput
				// Term
				.row: .input-field.col.m12
					label(for='search-term') I want
					input#search-term(type='text', :value='searchTerm', v-model='searchTerm')

				// Location
				.row: .input-field.col.m12
					label(for='location') I'm at
					input#location(type='text', :value='location', v-model='location')

				.form-group
					a.btn.waves-effect.waves-red(@click='getOutput') Search!

			// div#output(v-if='output.show').col.m8
			div#output(v-if='output.show')

				br(TODO)

				// TODO if output.success
				.row.alert.center(:class='output.success ? "alert-success" : "alert-danger"'): h3
					| {{ output.message }}

				template(v-if='output.success')
					// List restaurants
					div.business.card.row.col.s12.m6(v-for='business in output.results.businesses'
						itemscope, itemtype='http://schema.org/Restaurant',
						aria-label='Restaurant')
	
						// Image
						img.card-image.materialboxed.business-image(itemprop='image',
							:src='business.image_url',
							:data-caption='business.name')

						// Name
						span.card-title.business-name(aria-label='Name')
							| #[span(itemprop='name') {{ business.name }}]
	
	
						.row
							// Rating, review count, price, categories
							.col.m4
								.business-rating(aria-label='Yelp rating')
									span.sr-only Rating: {{ business.rating.toPrecision(2) }}
									img(:src="business.rating | getStarsImage",
										:title='business.rating.toPrecision(2) + " star rating"')
	
								.business-review-count(aria-label='Number of reviews')
									| Based on {{ business.review_count }} reviews
	
								.business-price-range(aria-label='Price range')
									| {{ business.price }}
	
								.business-catagories
									| Categories:
									ul: li(v-for='category in business.categories')
										span(itemprop='servesCuisine') {{ category.title }}
								
								// TODO: transactions
								// TODO: is_closed
								// TODO: distance
	
							// Location, phone
							.col.m4
								.business-address(aria-label='Address')
									span.sr-only Address:
									address.hidden
										span(itemprop='streetAddress')
											| {{ business.location.address1 }}
											template(v-if='business.location.address2') #[br] {{ business.location.address2 }}
											template(v-if='business.location.address3') #[br] {{ business.location.address3 }}
										span(itemprop='locality') {{ business.location.city }}
										span(itemprop='region') {{ business.location.state }}
										span(itemprop='postalCode') {{ business.location.zip_code }}
									address(itemprop='address')
										template(v-for='address in business.location.display_address') #[br] {{ address }}
	
								.business-phone(aria-label='Phone number')
									span.sr-only Phone number:
									span(itemprop='telephone') #[a(:href='"tel:" + business.phone') {{ business.display_phone }}]
			
								.business-coordinates(itemprop='geo', aria-label='Coordinates')
									| Coordinates: 
									| (#[span(itemprop='geo.lattitude') {{ business.coordinates.latitude }}], 
									| #[span(itemprop='geo.longitude') {{ business.coordinates.longitude }}])
	
							// Yelp
							.col.m2
								.business-yelp-review(aria-label='Link to Yelp review')
									a(itemprop='url', :href='business.url')
										span.hide Link to Yelp review
										img(src='yelp_logo/yelp_logo_outline.png', width='150px')
		
						.row.col.m12
							// p Raw data
							// 	ul: li(v-for='(prop, propName) in business') {{ propName }}: {{ prop }}

		footer: .footer-copyright
			.center.muted Made by Kyle Feng

		script(src='./babel-polyfill.min.js')
		script(src='./main.js')
